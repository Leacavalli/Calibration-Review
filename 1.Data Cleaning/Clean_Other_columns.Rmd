---
title: "Untitled"
output: html_document
date: "2024-06-27"
---

# Load data
```{r}
setwd("~/GitHub/Calibration-Review")
clean_data <- read.csv("Clean_data.csv")
colnames(clean_data |> select(contains("Other")))
colnames(clean_data |> select(contains("Not")))
```

# 1. Model.type
```{r}
clean_data |> group_by(Model.type) |> summarise(N=n())

clean_data |>
  filter(Model.type=="Other") |>
  select(Model.type, Other_Model.type)
  
clean_data |>
  filter(Other_Model.type != "", 
         Model.type!="Other") |>
  select(Model.type, Other_Model.type)

# Clean
clean_data_V1 <- clean_data |>
  mutate(Other_Model.type = ifelse(Other_Model.type == "105 LMICs (Country names not reported)", "", Other_Model.type))
```
# 2. What.justification.was.provided.for.choice.of.parameters.to.calibrate
```{r}
clean_data |> group_by(What.justification.was.provided.for.choice.of.parameters.to.calibrate.) |> summarise(N=n())

clean_data |>
  filter(What.justification.was.provided.for.choice.of.parameters.to.calibrate.=="Other") |>
  select(What.justification.was.provided.for.choice.of.parameters.to.calibrate., Other_What.justification.was.provided.for.choice.of.parameters.to.calibrate.)
  
clean_data |>
  filter(What.justification.was.provided.for.choice.of.parameters.to.calibrate.=="Other") |>
  select(What.justification.was.provided.for.choice.of.parameters.to.calibrate., Other_What.justification.was.provided.for.choice.of.parameters.to.calibrate.)|>
  rename("justification.for.parameter.choice"="What.justification.was.provided.for.choice.of.parameters.to.calibrate.", 
         "Other"="Other_What.justification.was.provided.for.choice.of.parameters.to.calibrate.")
  

clean_data |>
  filter(Other_What.justification.was.provided.for.choice.of.parameters.to.calibrate. != "", 
         What.justification.was.provided.for.choice.of.parameters.to.calibrate.!="Other") |>
  select(What.justification.was.provided.for.choice.of.parameters.to.calibrate., Other_What.justification.was.provided.for.choice.of.parameters.to.calibrate.)
```

# 3. Other_Type.of.data.used.for.defining.calibration.targets..select.all.that.apply.
```{r}
clean_data |> group_by(Type.of.data.used.for.defining.calibration.targets..select.all.that.apply.) |> summarise(N=n())


# The option 'Other' was selected in 'Type.of.data.used.for.defining.calibration.targets', but the 'Other' box what left empty.
clean_data |>
  filter(grepl("Other",Type.of.data.used.for.defining.calibration.targets..select.all.that.apply.), 
         Other_Type.of.data.used.for.defining.calibration.targets..select.all.that.apply. == "")|>
  select(Covidence.ID)

# The option 'Other' was not selected in 'Type.of.data.used.for.defining.calibration.targets', but the 'Other' box contains information. Please either select the 'Other' option, or empty the 'Other' box.
clean_data |>
  filter(Other_Type.of.data.used.for.defining.calibration.targets..select.all.that.apply. != "", 
         ! grepl("Other",Type.of.data.used.for.defining.calibration.targets..select.all.that.apply.)) |>
  select(Covidence.ID)
```

# 4. Name.of.calibration.algorithm
```{r}
clean_data |>
  filter(Name.of.calibration.algorithm=="Other ") |>
  filter(Other_Name.of.calibration.algorithm=="") |>
  pull(Covidence.ID)
  
clean_data |>
  filter(Other_Name.of.calibration.algorithm != "", 
         Name.of.calibration.algorithm !="Other ") |>
  select(Name.of.calibration.algorithm, Other_Name.of.calibration.algorithm)

# Clean 
clean_data_V2 <- clean_data_V1 |>
  mutate(Other_Name.of.calibration.algorithm = ifelse(Other_Name.of.calibration.algorithm == "A Bayesian framework", "", Other_Name.of.calibration.algorithm))|>
  mutate(Other_Name.of.calibration.algorithm = ifelse(Other_Name.of.calibration.algorithm == " ", "", Other_Name.of.calibration.algorithm))|>
  mutate(Other_Name.of.calibration.algorithm = ifelse(Other_Name.of.calibration.algorithm == "Not reported", "", Other_Name.of.calibration.algorithm))
```

# 5. Other_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm
```{r}
clean_data |>
  filter(Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm=="Other ") |>
  filter(Other_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm=="") |>
  select(Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm, Other_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm, Not_Clear_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm)

# The 'Goodness.of.fit..GOF..measure' is set to 'Other', but the 'Other' box was left empty
clean_data |>
  filter(Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm=="Other ") |>
  filter(Other_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm=="") |>
  select(Covidence.ID)
#1745
#972  
#680
  
clean_data |>
  filter(Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm=="Not clear") |>
  filter(Not_Clear_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm=="") |>
  select(Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm, Other_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm, Not_Clear_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm)

# The 'Goodness.of.fit..GOF..measure' is not set to 'Other', but there is information in the 'Other' box.
clean_data |>
  filter(Other_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm != "", 
         (Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm != "Other ")) |>
  select(Covidence.ID)
#1501 
#1392  
#414   
#76   
#31

# The 'Goodness.of.fit..GOF..measure' is not set to 'Not clear', but there is information in the 'Not clear' box.
clean_data |>
  filter(Not_Clear_Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm != "", 
         (Goodness.of.fit..GOF..measure.employed.within.calibration.algorithm != "Not clear")) |>
  select(Covidence.ID)
#2155  
#1745   
#972   
#680

```

# 6. Other_Nature.of.calibration.results                                            
```{r}
clean_data |>
  filter(Nature.of.calibration.results=="Other ") |>
  select(Nature.of.calibration.results, Other_Nature.of.calibration.results)
  
clean_data |>
  filter(Other_Nature.of.calibration.results != "", 
         Nature.of.calibration.results != "Other ") |>
  select(Nature.of.calibration.results, Other_Nature.of.calibration.results)
```

# 7. Other_How.are.calibration.results.reported.
```{r}
clean_data |> group_by(How.are.calibration.results.reported.) |> summarise(N=n())

clean_data |> filter(Other_How.are.calibration.results.reported. != "")

```

# 8. Other_How.is.uncertainty.in.calibration.outputs.reported.
```{r}
clean_data |> group_by(How.is.uncertainty.in.calibration.outputs.reported.) |> summarise(N=n())

clean_data |> filter(Other_How.is.uncertainty.in.calibration.outputs.reported. != "")
```